# Question service. Task 1

Для установки сервиса необходимы docker, docker compose, git, аккаунт на Github

Сервис использует фреймворк Flask (backend), PostgreSQL (БД), gunicorn (HTTP server). 

### Запуск сервиса

Клонируйте репозиторий:

```
git clone https://github.com/Strokman/bewise_question_task.git
```

Перейдите в созданную директорию:

```
cd bewise_question_task
```

Внутри этой директории сделайте файл скрипта `create_service.sh`
исполняемым и запустите его при помощи следующих команд:

```
chmod +x create_service.sh
./create_service.sh
```

Контейнеры будут созданы и запущены через приблизительно минуту.

В случае каких-либо ошибок в процессе установки - выполните запуск скрипта с правами суперпользователя (sudo).

По умолчанию это будет ссылка вида (http://localhost:5050/). В дальнейшем в инструкции будет использоваться этот формат.
В конфигурации используютcя нестандартные порты (5555 для postgres и 5050 для web-сервиса), 
так как предполагаю, что стандартные могут быть уже заняты, в том числе, чтобы исключить конфликты
с контейнерами из первого задания. Если и эти порты заняты - в файле docker-compose.yml необходимо прописать
в обоих контейнерах другие, свободные, порты хост-машины

    ports:
        - 5555:5432

(первый номер порта - до двоеточия). В адресе запроса необходимо будет использовать тот порт, 
который будет указан в `.yml` файле для web-сервиса.

### Пример запроса к сервису

Обращаться к сервису можно через командную строку утилитой `curl`, а также любым подходящим софтом (Postman и т.д.).

```
curl -iX POST -H "Content-Type: application/json" -d '{"questions_num": <int>}' http://127.0.0.1:5050/api/count
```

Обратите внимание, что тело запроса обязательно должно быть в форме json-строки, как указано в примерах.

Вместо int следует указывать количество запрашиваемых вопросов - от 1 до 100 - так как JService принимает запросы
не более чем на 100 вопросов единовременно. Если необходимо большее количество вопросов - сделайте несколько запросов.
Такой вариант реализован с той целью, чтобы ускорить работу (если совершать запросы по одному в range переданного числа - 
время ответа API достаточно большое, а также мы очень скоро упремся в 429 Too Many Requests). Поэтому наиболее оптимально
совершать запросы к API пакетно и не более чем 100 вопросов за один запрос.

В соответствии с техзаданием сервис возвращает в формате json последний сохраненный в базе вопрос до текущего запроса,
или пустой объект, если в базе ничего нет.


