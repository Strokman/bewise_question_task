# Question service. Task 1

В соответствии с заданием сервис был разработан с помощью микрофреймворка Flask.
Для его работы необходимы установленные docker, docker-compose, git, аккаунт на Github

### Запуск сервиса

Клонируйте репозиторий:

```
git clone https://github.com/Strokman/bewise_question_task.git
```

Перейдите в созданную директорию:

```
cd bewise_question_task
```

Внутри этой директории сделайте файл скрипта create_service
исполняемым и запустите его при помощи следующих команд:

```
chmod +x create_service.sh
./create_service.sh
```

Контейнеры будут созданы и запущены через приблизительно минуту

В случае каких-либо ошибок в процессе установки - выполните запуск скрипта с правами суперпользователя (sudo)

### Пример запроса к сервису

Запросы к сервису можно осуществить с помощью утилиты curl

```
curl -iX POST -H "Content-Type: application/json" -d '{"questions_num": <int>}' http://127.0.0.1:5050/count
```

Можно обратиться напрямую из python-скрипта, используя модуль requests

```
import requests

url = 'http://127.0.0.1:5050/count'
headers = {'content-type': 'application/json'}
data = '{"questions_num": <int>}'
resp = requests.post(url, headers=headers, data=data)
```
Обратите внимание, что тело запроса обязательно должно быть в форме json-строки, как указано в примерах.

Конечно можно использовать Postman и аналогичный софт.

Вместо int следует указывать количество запрашиваемых вопросов - от 1 до 100 - так как JService принимает запросы
не более чем на 100 вопросов единовременно. Если необходимо большее количество вопросов - сделайте несколько запросов.

В соответствии с техзаданием сервис возвращает в формате json последний сохраненный в базе вопрос до текущего запроса,
или пустой объект, если в базе ничего нет.

В конфигурации используютcя нестандартные порты, так как предполагаю, что стандартные могут быть уже заняты.
Если и эти порты заняты - в файле docker-compose.yml необходимо прописать в обоих сервисах другие, свободные,
порты хост-машины (раздел ports, первый номер порта - до двоеточия), и в адресе запроса также указывать порт, который
используется для gunicorn сервера


